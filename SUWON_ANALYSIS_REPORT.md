# 수원시 음식점 추천 모델 분석 결과

## 📊 분석 개요

**분석 일시**: 2024년  
**분석 대상**: 수원시 음식점 10개  
**예측 데이터**: 30개 (3명의 사용자 × 10개 음식점)

## ⚠️ 발견된 주요 문제점

### 1. DeepFM 점수가 비정상적으로 낮음

**문제**:
- DeepFM 평균 점수: **1.15점** (범위: 1.03 ~ 1.32)
- 실제 별점 평균: **4.22점** (범위: 3.67 ~ 4.67)
- **차이: 약 3점 이상**

**영향**:
- 모든 음식점에 대해 거의 동일한 낮은 점수(1.03~1.32)를 예측
- 실제 별점과의 차이가 2.6~3.5점으로 매우 큼
- 개인화가 전혀 작동하지 않음 (모든 사용자에게 비슷한 점수)

**예시**:
- 한창희 천하일면 아주대점: 실제 4.7점 → DeepFM 예측 1.1점 (차이 3.5점)
- 뚱보아저씨수제돈까스: 실제 4.4점 → DeepFM 예측 1.1점 (차이 3.2점)
- 도담도담치킨: 실제 4.3점 → DeepFM 예측 1.1점 (차이 3.2점)

### 2. Multi-Tower는 비교적 정상

**상태**:
- Multi-Tower 평균 점수: **3.86점** (범위: 3.47 ~ 4.16)
- 실제 별점과 유사한 범위
- 표준편차: 0.21 (적절한 분산)

**결론**: Multi-Tower 모델은 정상 작동 중

### 3. DeepFM 점수 분산 부족

**문제**:
- 표준편차: **0.12** (매우 작음)
- 모든 음식점에 대해 거의 동일한 점수 예측
- 개인화 추천이 불가능한 상태

## 🔍 원인 분석

### 가능한 원인들:

1. **모델 출력 스케일 문제**
   - DeepFM 모델의 원시 출력이 매우 작은 음수값일 가능성
   - `sigmoid(음수) * 4 + 1` 공식으로 인해 1에 가까운 값으로 변환됨
   - 예: 원시 출력 -5 → sigmoid(-5) ≈ 0.0067 → 0.0067 * 4 + 1 ≈ 1.03

2. **입력 피처 스케일링 문제**
   - 학습 시 사용한 스케일러와 추론 시 스케일러가 다를 수 있음
   - `scaler_params.json` 파일이 없거나 잘못된 값일 가능성

3. **모델 학습 문제**
   - 모델이 제대로 학습되지 않았을 가능성
   - 학습 데이터와 추론 데이터의 분포가 다를 수 있음

4. **ABSA 피처 문제**
   - 사용자나 음식점의 ABSA 피처가 제대로 계산되지 않았을 가능성
   - ABSA 피처가 모두 0이거나 비정상적인 값일 수 있음

## 💡 권장 조치사항

### 즉시 조치:

1. **DeepFM 모델 재학습**
   - 현재 모델이 제대로 작동하지 않으므로 재학습 필요
   - 학습 데이터와 추론 데이터의 일관성 확인

2. **입력 피처 검증**
   - 실제 예측 시 입력되는 피처 값들을 확인
   - 스케일러 파라미터(`scaler_params.json`) 확인
   - ABSA 피처가 제대로 계산되었는지 확인

3. **Multi-Tower 모델 우선 사용**
   - 현재는 Multi-Tower 모델이 정상 작동하므로 우선 사용
   - DeepFM 모델 수정 전까지는 Multi-Tower만 사용 권장

### 장기 조치:

1. **모델 모니터링 시스템 구축**
   - 예측 점수의 분포를 지속적으로 모니터링
   - 이상치 감지 알림 시스템 구축

2. **A/B 테스트**
   - DeepFM과 Multi-Tower의 실제 추천 성능 비교
   - 사용자 피드백 기반 모델 선택

## 📈 통계 요약

### DeepFM 점수 분포:
- 평균: 1.15점
- 중앙값: 1.08점
- 표준편차: 0.12
- 최소: 1.03점
- 최대: 1.32점

### Multi-Tower 점수 분포:
- 평균: 3.86점
- 중앙값: 3.98점
- 표준편차: 0.21
- 최소: 3.47점
- 최대: 4.16점

### 실제 별점 분포:
- 평균: 4.22점
- 중앙값: 4.33점
- 표준편차: 0.35
- 최소: 3.67점
- 최대: 4.67점

## 🎯 결론

**현재 상태**: DeepFM 모델이 심각한 문제를 가지고 있어 사용 불가능한 상태입니다. 모든 음식점에 대해 1점대의 낮은 점수를 예측하고 있으며, 실제 별점과의 차이가 3점 이상입니다.

**권장 조치**: Multi-Tower 모델만 사용하고, DeepFM 모델은 재학습이 필요합니다.

